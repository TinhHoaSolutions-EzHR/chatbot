---
id: handle-new-chat-message-chat-send-message-post
title: "Handle New Chat Message"
description: "This endpoint is both used for all the following purposes:"
sidebar_label: "Handle New Chat Message"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/chatbot-api/sample-backend
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Handle New Chat Message"}
>
</Heading>

<MethodEndpoint
  method={"post"}
  path={"/chat/send-message"}
  context={"endpoint"}
>
  
</MethodEndpoint>



This endpoint is both used for all the following purposes:
- Sending a new message in the session
- Regenerating a message in the session (just send the same one again)
- Editing a message (similar to regenerating but sending a different message)

To avoid extra overhead/latency, this assumes (and checks) that previous messages on the path
have already been set as latest

<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={undefined}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={{"content":{"application/json":{"schema":{"properties":{"chat_session_id":{"type":"integer","title":"Chat Session Id"},"parent_message_id":{"type":"integer","title":"Parent Message Id"},"message":{"type":"string","title":"Message"},"prompt_id":{"type":"integer","title":"Prompt Id"},"search_doc_ids":{"items":{"type":"integer"},"type":"array","title":"Search Doc Ids"},"retrieval_options":{"properties":{"run_search":{"allOf":[{"type":"string","enum":["always","never","auto"],"title":"OptionalSearchSetting","description":"An enumeration."}],"default":"always"},"real_time":{"type":"boolean","title":"Real Time","default":true},"filters":{"properties":{"source_type":{"items":{"type":"string","enum":["ingestion_api","slack","web","google_drive","gmail","requesttracker","github","gitlab","guru","bookstack","confluence","discourse","slab","salesforce","jira","productboard","file","notion","zulip","linear","hubspot","document360","gong","google_sites","zendesk","loopio","sharepoint","teams","freshdesk"],"title":"DocumentSource","description":"An enumeration."},"type":"array"},"document_set":{"items":{"type":"string"},"type":"array","title":"Document Set"},"time_cutoff":{"type":"string","format":"date-time","title":"Time Cutoff"},"tags":{"items":{"properties":{"tag_key":{"type":"string","title":"Tag Key"},"tag_value":{"type":"string","title":"Tag Value"}},"type":"object","required":["tag_key","tag_value"],"title":"Tag"},"type":"array","title":"Tags"}},"type":"object","title":"BaseFilters"},"enable_auto_detect_filters":{"type":"boolean","title":"Enable Auto Detect Filters"},"offset":{"type":"integer","title":"Offset"},"limit":{"type":"integer","title":"Limit"}},"type":"object","title":"RetrievalDetails"},"query_override":{"type":"string","title":"Query Override"},"no_ai_answer":{"type":"boolean","title":"No Ai Answer","default":false}},"type":"object","required":["chat_session_id","message"],"title":"CreateChatMessageRequest","description":"Before creating messages, be sure to create a chat_session and get an id"}}},"required":true}}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"properties":{"detail":{"items":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"}}}}}}
>
  
</StatusCodes>


      